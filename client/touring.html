<head>
  <script type="text/javascript"
    src="http://maps.googleapis.com/maps/api/js?key=AIzaSyDEljhoD7LjZfNplwV2zAjx1onw6rMjj6o&sensor=false&libraries=geometry">
  </script>

  <title>touring</title>
</head>

<body>
  {{> content}}
</body>

<template name="content">
  {{#if has_trip}}
  <div id='content'>
    <button class='home button'>All trips</button> 
    <button class='button danger'>Destroy</button> 
    {{> show_trip}}
    {{> days}}
  </div>
  <div id="map_canvas" ></div>
  {{else}}
    {{> trips}}
  {{/if}}
</template>

<template name="trips">
  <div id='all_trips'>
    <div id='new_trip'>
      <button class='button gigantic'>New Trip</button>
    </div>
    {{#each trips}}
      {{> trip}}
    {{/each}}
  </div>
</template>

<template name="trip">
  <div class='trip'>
    <h1>{{title}}</h1>
    <div class='details'>
      <span>{{#if num_days}}{{miles}} {{num_days}} days {{else}} Empty trip :-( {{/if}}</span>
    </div>
    <img src={{path}} >
  </div>
</template>

<template name="show_trip">
  <div class='show_trip' title='Double click to edit'>
    <h1 class='editable title'>{{greeting}}</h1>
    {{#if no_days}}
      <ul class='help'>
        <li>Click anywhere on the map to start your trip.</li>
      </ul>
    {{/if}}
    {{#if one_day}}
      <ul class='help'>
        <li>Each day gets an automatic address.</li>
        <li>Keep clicking on the map to append days.</li>
      </ul>
    {{/if}}
    {{#if two_days}}
      <ul class='help'>
        <li>Drag the directions to add waypoints to a route.</li>
      </ul>
    {{/if}}
    {{#if three_days}}
      <ul class='help'>
        <li>Double click the trip title to make it editable and press enter to save your changes. </li>
      </ul>
    {{/if}}
    {{#if many_days}}
    {{/if}}
  </div>
</template>

<template name="days">
<div>
  <div class="days">
    {{#each days}}
      {{> day}}
    {{/each}}
  </div>
</div>
</template>

<template name="day">
<div class="day{{current}}" id={{_id}}>
  <span class="wrap destroy_wrap">
    <span class="destroy"></span>
  </span>
  <span class="order"> {{order}}</span>
  <span class="distance"> {{miles}}</span>
  <span title='Double click to edit' class="stop editable"> {{stop_or_address}} </span>
  <span class="wrap insert_wrap"> 
    <span class="insert"></span>
  </span>
  <span class="wrap directions_wrap">
    <span class="directions"></span>
  </span>
</div>
</template>

<template name="waypoint">
  <div class='waypoint'>
    {{short_loc}}
  </div>
</template>
<template name="day_details">
  <div class='day_details'>
  </div>
</template>
